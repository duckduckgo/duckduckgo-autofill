<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Password update flows</title>
    <link rel="stylesheet" href="./style.css" />
</head>

<body>

<div class="dialog">
    <form action="/change-password" id="change">
        <h2>Change password (with hidden username field)</h2>
        <fieldset>
            <input id="email" type="hidden" value="test@test.com">
            <label for="password-current">Current Password</label>
            <input id="password-current" name="password-current" type="password" autocomplete="current-password">
            <label for="password-new">New Password</label>
            <input id="password-new" name="password-new" type="password" autocomplete="new-password">
            <label for="password-new-confirm">Confirm Password</label>
            <input id="password-new-confirm" name="password-new-confirm" type="password" autocomplete="new-password">
            <button type="submit">Change password</button>
        </fieldset>
    </form>
</div>
<script type="module">
    [...document.forms].forEach((form) => {
        form.addEventListener("submit", (e) => {
            e.preventDefault();
            const formData = new FormData(e.target)
            const dl = document.createElement('dl')
            formData.forEach((value, key) => {
                const dt = document.createElement('dt')
                const dd = document.createElement('dd')
                dt.innerText = key
                dd.innerText = value
                dl.append(dt, dd)
            })
            form.after(dl)
            form.remove()
        })
    })
</script>
</body>

</html>
